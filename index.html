<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üèãÔ∏è Calisthenics Coach Bot</title>

<style>
body{
 margin:0;
 background:#e5ddd5;
 font-family:Arial,Helvetica,sans-serif;
}
#app{
 max-width:480px;
 margin:auto;
 height:100vh;
 display:flex;
 flex-direction:column;
 background:#f0f0f0;
}
header{
 background:#2196f3;
 color:#fff;
 padding:12px;
 text-align:center;
 font-weight:bold;
}
#chat{
 flex:1;
 overflow-y:auto;
 padding:10px;
}
.msg{
 max-width:82%;
 padding:10px 12px;
 margin:6px 0;
 border-radius:12px;
 font-size:14px;
 line-height:1.4;
}
.bot{
 background:#fff;
 align-self:flex-start;
}
.user{
 background:#dcf8c6;
 align-self:flex-end;
}
.time{
 font-size:10px;
 opacity:.6;
 margin-top:4px;
}
footer{
 display:flex;
 padding:8px;
 background:#fff;
}
input{
 flex:1;
 padding:8px 12px;
 border-radius:20px;
 border:1px solid #ccc;
 outline:none;
}
button{
 margin-left:6px;
 border:none;
 width:40px;
 height:40px;
 border-radius:50%;
 font-size:16px;
 color:#fff;
}
#send{background:#2196f3}
#clear{background:#f44336}
</style>
</head>

<body>
<div id="app">
<header>üèãÔ∏è Calisthenics Coach Bot</header>

<div id="chat"></div>

<footer>
 <input id="input" placeholder="Nh·∫Øn g√¨ ƒë√≥‚Ä¶">
 <button id="send" onclick="send()">‚û§</button>
 <button id="clear" onclick="clearChat()">‚úï</button>
</footer>
</div>

<script>
/* ====== STORAGE ====== */
let history = JSON.parse(localStorage.getItem("chat")) || []
let memory = JSON.parse(localStorage.getItem("memory")) || {
 level:"beginner",
 lastWorkout:null
}

const chat=document.getElementById("chat")
const input=document.getElementById("input")

function now(){
 const d=new Date()
 return d.toLocaleTimeString("vi-VN")+" "+d.toLocaleDateString("vi-VN")
}

function add(text,who){
 history.push({text,who,time:now()})
 localStorage.setItem("chat",JSON.stringify(history))
 render()
}

function render(){
 chat.innerHTML=""
 history.forEach(m=>{
  const div=document.createElement("div")
  div.className="msg "+m.who
  div.innerHTML=m.text+"<div class='time'>"+m.time+"</div>"
  chat.appendChild(div)
 })
 chat.scrollTop=chat.scrollHeight
}
render()

function clearChat(){
 if(confirm("X√≥a to√†n b·ªô l·ªãch s·ª≠ chat?")){
  history=[]
  localStorage.removeItem("chat")
  render()
 }
}

/* ====== DATA B√ÄI T·∫¨P ====== */
const DATA={
 push:{
  name:"NG·ª∞C ‚Äì VAI ‚Äì TAY SAU",
  basic:[
   "Push-up",
   "Incline / Decline push-up",
   "Dips gh·∫ø / x√†",
   "Pike push-up",
   "Resistance band chest press",
   "Resistance band triceps extension",
   "Diamond push-up"
  ],
  skill:[
   "Archer push-up",
   "Pseudo planche push-up",
   "Handstand hold",
   "Handstand push-up"
  ]
 },
 pull:{
  name:"L∆ØNG ‚Äì TAY TR∆Ø·ªöC ‚Äì B·ª§NG",
  basic:[
   "Australian pull-up",
   "Pull-up / Chin-up",
   "Resistance band row",
   "Resistance band biceps curl",
   "Hanging knee raise",
   "Plank",
   "Hollow body hold"
  ],
  skill:[
   "Archer pull-up",
   "L-sit",
   "Front lever tuck",
   "Front lever raise"
  ]
 },
 legs:{
  name:"CH√ÇN ‚Äì CORE",
  basic:[
   "Squat",
   "Lunge",
   "Glute bridge",
   "Resistance band squat",
   "Calf raise",
   "Side plank",
   "Leg raise"
  ],
  skill:[
   "Pistol squat",
   "Shrimp squat",
   "Dragon flag"
  ]
 }
}

/* ====== BOT LOGIC ====== */
let state=null

function bot(msg){
 msg=msg.toLowerCase()

 if(msg==="√™"){
  add("M√¨nh ƒë√¢y üòÑ\nH√¥m nay b·∫°n mu·ªën t·∫≠p **push / pull / ch√¢n**, hay **l√™n l·ªãch 4 tu·∫ßn**?","bot")
  return
 }

 if(msg.includes("l·ªãch")){
  add(
`üìÖ L·ªäCH 4 TU·∫¶N (CHU·∫®N)

‚Ä¢ Th·ª© 2: Push
‚Ä¢ Th·ª© 4: Pull
‚Ä¢ Th·ª© 6: Legs

M·ªói tu·∫ßn tƒÉng nh·∫π rep / ƒë·ªô kh√≥.
B·∫°n ƒëang **kh·ªèe hay m·ªát** h√¥m nay?`,
"bot")
  return
 }

 if(msg.includes("kh·ªèe")){
  memory.level="advanced"
  localStorage.setItem("memory",JSON.stringify(memory))
  add("üî• Ok, m√¨nh cho b√†i **n·∫∑ng h∆°n** nha","bot")
  return
 }

 if(msg.includes("m·ªát")){
  memory.level="beginner"
  localStorage.setItem("memory",JSON.stringify(memory))
  add("üëå Hi·ªÉu r·ªìi, h√¥m nay t·∫≠p **nh·∫π ‚Äì k·ªπ thu·∫≠t** th√¥i","bot")
  return
 }

 if(msg.includes("push")||msg.includes("ng·ª±c")){
  show("push"); return
 }
 if(msg.includes("pull")||msg.includes("l∆∞ng")){
  show("pull"); return
 }
 if(msg.includes("ch√¢n")||msg.includes("legs")){
  show("legs"); return
 }

 if(msg.includes("skill")){
  let out="üî• SKILL CALISTHENICS\n"
  Object.values(DATA).forEach(g=>{
   g.skill.forEach(s=>out+="‚Ä¢ "+s+"\n")
  })
  add(out,"bot"); return
 }

 add("ü§î B·∫°n th·ª≠ n√≥i: **√™ / push / pull / ch√¢n / l·ªãch / skill**","bot")
}

function show(type){
 const g=DATA[type]
 let out=`üí™ BU·ªîI ${g.name}\n\n`
 g.basic.forEach(b=>out+="‚Ä¢ "+b+"\n")
 out+="\nüî• B√†i kh√≥:\n"
 g.skill.forEach(s=>out+="‚Ä¢ "+s+"\n")
 out+="\nüëâ T·∫≠p xong n√≥i: **xong** / **m·ªát**"
 add(out,"bot")
 memory.lastWorkout=type
 localStorage.setItem("memory",JSON.stringify(memory))
}

/* ====== SEND ====== */
function send(){
 const t=input.value.trim()
 if(!t) return
 add(t,"user")
 input.value=""
 setTimeout(()=>bot(t),300)
}
</script>
</body>
</html>